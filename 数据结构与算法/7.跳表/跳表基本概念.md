***
# 什么是跳表

背景：二分查找算法依赖数组随机访问特性，所以需要使用数组实现，针对链表，为了支持类似二分查找算法，对链表进行改造。

![[跳表结构.excalidraw]]

**定义：单链表加多级索引的结构，就是跳表
***
## 跳表的查询有多快

链表里有n个结点，每两个结点抽出一个结点作为上一级索引的结点，那第一级索引的结点有n/2，第二级索引大约 n/4，第三级结点大约为n/8，以此类推：
![[跳表索引类推.excalidraw]]
**第 k 级索引的结点个数是第 k-1 级索引的结点个数的 1/2，那第 k级索引结点的个数就是 n/(2^k)。

假设有h级，最高索引有2个结点。n/(2^h) = 2，那么h就为：h=log2^(n-1)，h表示层级数目，把原始链表加上，就是h=log2^(n)，再设定每层遍历m个结点，那么复杂度就为O(m*logn)。

另外，大家可以发现，其实我们从K层到k-1层最多只需要三个遍历，如图：
![[跳变遍历次数图.excalidraw]]
因此，跳表整体的复杂度为：
**O(logn)。

## 跳表是否浪费很大的内存
跳表本身是通过空间换取的时间，比单链表肯定占用更多的空间，但是实际开发中，我们链表节点中存放的数据比索引的数据大很多的，因此不用太纠结，如果存储的数据都是整型，那可能就比较明显。还是根据实际情况判断。

***
# 跳表的操作

## 插入和删除
![[跳表插入与删除图解.excalidraw]]
**注意点：因为单链表中的删除操作需要拿到要删除结点的前驱结点，然后通过指针操作完成删除。所以在查找要删除的结点的时候，一定要获取前驱结点。双向链表就不需要考虑这个点。

## 索引动态更新
为什么需要动态更新
![[跳表动态更新理由.excalidraw]]

跳表是通过随机函数来维护前面提到的“平衡性”，可以通过一个随机函数，来决定将这个结点插入到哪几级索引中，比如随机函数生成了值 K，那我们就将这个结点添加到第一级到第 K 级这 K 级索引中。

![[跳表随机动态更新.excalidraw]]